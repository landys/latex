\chapter{技术方案}
\label{cha:tech}

\section{环境和技术}
\label{sec:techEnviron}

本系统将采用B/S架构，这样用户可以通过各种浏览器很容易地访问本系统提供的搜索服务。
另外，由于用户个性化信息需要存储在客户端，并且需要提供用户配置各种参数的界面。
为了较好的完成这一功能，浏览器的插件形式是一个很不错的选择。
当然由于目前浏览器众多，而IE和FireFox浏览器最为广泛使用，并且它们都提供了较好地开发插件的环境，
所以首先仅开发这两个浏览器的插件。

系统的基本架构和发布的形式，部分地决定了开发应用环境和所能选择的技术。
从语言的选择来说，系统B/S架构的搜索服务部分使用J2EE（Java）开发，而浏览器插件部分则使用C++开发。
另外，客户端需要进行用户个性化数据的采集、处理、建模等操作，还要进行页面的二次重排，
浏览器客户端脚本（如JavaScript）和本地程序（比如ActiveX等）的联合开发也必不可少。

搜索系统服务部分将部署在Tomcat容器上。系统服务器端数据使用MySQL存储，而客户端的个性化数据以XML配置文件保存。

对于实际的网络搜索部分，系统利用Google
API提供的搜索服务获取搜索结果，而不是自己去实现。

\section{系统实现}
\label{sec:techImpl}

\subsection{架构}
\label{sub:techArch}

本小节主要讨论搜索系统主体部分的架构，并不讨论用户用来配置个性化信息和隐私相关数据的浏览器插件的结构，
因为这些插件本身结构是很简单的。搜索系统架构如图\ref{fig:arch}所示。

\begin{figure}[h]\centering
  \wuhao
  \includegraphics[width=\textwidth]{arch.eps}
  \caption{搜索系统架构}\label{fig:arch}
\end{figure}

由图中可以看到，一个基于隐私的个性化保护主要分为如下几步：

\begin{compactenum}
\item
用户通过浏览器发出搜索请求。
\item
请求被客户端脚本（如JavaScript脚本）截获，
它从客户端个性化信息文件中获得需发送给服务端的个性化信息，其形式为经过建模和多重隐私保护处理的层次化树状模型。
随后，脚本把用户请求和搜索请求一起发给服务器。
\item
服务器把用户请求发给Google搜索服务获得Google的搜索结果。
\item
服务器把返回的结果页面集与用户个性化信息，交给服务器页面重排模块进行权衡综合，进行页面重排序。
\item
服务器把排好的页面集发送给浏览器（客户端脚本）。
\item
客户端脚本取出页面集，交给本地的页面重排程序，用更详细的个性化信息对页面进行重排。
这次的个性化信息是经过一次关键字过滤处理后建立的层次化树状模型，未经后序的一些隐私保护操作。
\item
重排好的页面最终显示给用户。
\end{compactenum}

\subsection{个性化信息建模过程}
\label{sub:techImplPrivate}

个性化信息建模的过程，极大地体现了本系统的隐私保护机制。该部分和页面服务器/客户端两次重排机制一起，
构成了本系统隐私保护的核心内容。个性化信息建模和隐私保护的过程如图\ref{fig:personal}。

\begin{figure}[h]\centering
  \wuhao
  \includegraphics[width=\textwidth]{personal.eps}
  \caption{个性化信息建模和隐私保护处理}\label{fig:personal}
\end{figure}

由图中看出，个性化信息建模及其中的隐私保护机制的实现主要分如下几步：
\begin{compactenum}
\item
根据用户配制，从数据来源（包括用户访问历史记录、用户收藏（包括网上文摘，如CSDN，delicious等）、
搜索时提供的关键词、以及对搜索结果的点击）提取原始个性化数据。
\item
原始个性化数据经过第一次关键词过滤。
\item
个性化数据经过一定的清洁、抽象、泛化，根据抽象的程度建立层次化树状模型，并存储在客户端。
\item
层次化树状模型中所包含的隐私将被量化，再根据用户的配置对一些隐私进行隐藏、删除等。
\item
树状模型进行第二次关键词过滤，并且与前一次过滤的关键词是不同的。
过滤后的个性化信息保存在客户端，将伴随用户搜索请求发给服务器。
\end{compactenum}
