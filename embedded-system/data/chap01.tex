\chapter{引言}
\label{cha:intro}

\section{相关概念}
\label{sec:introConcept}

随着多媒体网络技术发展及电子产品智能化，嵌入式操作系统以其稳定性、伸缩性、可扩展性等优良特性，
在嵌入式产品中得到了广泛的应用。多数嵌入式产品往往对实时性有着一定的需求，而事实上，
很多嵌入式操作系统本身都是实时系统。所谓的实时系统，是指必须在一个给定的时间期限之前完成计算任务的系统。

实时系统根据其时限要求和对超时错误码的容忍程度不同，分为硬实时系统和软实时系统。
硬实时系统具有强实时约束，它对作业的运行有一个严格的时间限制，任何超出时限的错误都会导致灾难性后果。
软实时系统具有弱实时约束，它对计算任务有时限要求，但一般的超时并不会引起严重的后果，
随着延迟的作业增多，系统整体性能可能有所下降\cite{Hermann91}。
如图\ref{fig:realtime}\footnote{该图来自于浙大嵌入式系统硕士课程实时系统课件，陈天洲教授。}。
\begin{figure}[h]\centering
  \wuhao
  \includegraphics[width=0.90\textwidth]{realtime.eps}
  \caption{实时系统的不同实时性特点}\label{fig:realtime}
\end{figure}

目前世界范围内嵌入式实时操作系统产品非常多，应用十分广泛，其中著名的有Nucleus
Plus、VxWorks、QNX、pSOS、LynxOS、RT-Linux、IxCLinux、IXC/OS-II、eCo等。
而国内也有一些产品，如科银京成的DeltaOS、中科院的EEOS、凯思集团的HopenOS等，尽管技术含量相对较低。

对于嵌入式实时操作系统来说，最重要的是必须能够满足在一个事先定义好的时间限制中对外部或内部的事件进行响应和处理。
相应地，它对于内存管理也有着特殊的要求\cite{Crespo06}：

\begin{compactdesc}
\item[响应时限]
内存分配和释放的最坏响应时间是提前设定的，并且与具体的应用无关。
\item[快速性]
对于实时系统来说，内存管理仅仅保证硬实时约束是不够的，还必须保证快速性，保证简单快速的分配和释放内存。
这决定了实时系统中不能采用像通用操作系统那样复杂而完善的内存分配策略。
\item[可靠性]
系统对于内存的请求必须得到满足。对于实时应用来说，内存请求的无法满足，可能会带来灾难性的后果。
\item[高效性]
在嵌入式系统中，内存是珍贵的资源，必须高效地加以利用，以做到浪费的内存尽可能地小。
\end{compactdesc}

另外，内存管理中的内存分配，主要可分为静态分配和动态分配。
静态分配是指在编译或链接时将程序所需的内存空间进行分配，程序运行过程中能且只能使用这些内存。
动态分配是指内存在程序运行时根据需要向系统申请后获得。
相比较而言，静态分配注重效率和安全，动态分配则偏重于灵活性。

\section{相关研究和意义}
\label{sec:introRelated}

由于嵌入式实时操作系统实时的特点，它决定了内存管理单元的响应时限、快速性、高效性和高效性这四个特性。
从内存分配角度来说，对于实时性和可靠性要求极高的系统（硬实时系统），不允许延时或者分配失效，
必须采用静态内存分配。但是，仅仅采用静态分配，系统便失去了灵活性。
虽然动态内存分配会导致响应和执行时间不确定、内存碎片等问题，但是它的实现机制灵活，
给程序实现带来极大的方便，有的应用环境中动态内存分配甚至是必不可少的。

正是因为动态分配的灵活性，国内外对动态内存分配的研究也相对较多。
论文\cite{Miguel04}对嵌入式实时操作系统的动态内存分配进行了研究，提出一种新的分配机制，
称之为TLSF（Two Level Segregated
Fit）。TLSF是专门为实时系统设计的动态内存分配机制，它考虑实时系统时间和空间两个维度的约束。
TLSF的时间复杂度是O(1)，并且保证了较好的空间复杂度。论文\cite{Crespo06}进一步对TLSF内存分配机制进行了研究，
把它与已知的嵌入式实时操作系统上的各种内存动态分配机制进行了比较，并且得出，
TLSF的空间复杂度也是已知的分配机制中最好的。论文\cite{Miguel06}更是设定了一个衡量框架，
系统地分析和比较了各种动态内存分配机制的优势和劣势，主要集中于时间复杂度和内存碎片的角度。

这些论文着重讨论动态内存分配的同时，也讨论了实时系统安全性和可靠性相关的一些内存分配技术。
从目前的国内外研究现状来看，这些技术一般从以下三个方面着手：
\begin{compactitem}
\item 动态内存泄漏检测及回收；
\item 内存容错及冗余技术；
\item 内存保护技术。
\end{compactitem}

另外，论文\cite{Xie05,Qin05,Maebe04}讨论了内存泄漏检测及回收相关内容，而这些内容可以使用在特定的嵌入式实时系统中，
解决这方面的问题。论文\cite{Huang02,Malay05}讨论了一些容错及冗余技术。
论文\cite{Frank02}讨论了内存保护相关的技术，主要是基于MMU的内存保护。

本文根据嵌入式实时操作系统的特点，及对内存管理的特殊要求，
着重针对于一系列有助于提高系统安全性和可靠性的内存管理技术进行了深入的研究，
主要包括动态内存泄漏检测及回收、内存容错及冗余技术和内存保护技术。
本文对这些技术研究的同时，得出结论，为以后的相关研究提供一定依据。
